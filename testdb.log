/*C3*/SET SCHEMA PUBLIC
alter table recipe drop constraint FK_n4apafjamkqbin6g6j7i6ia6x
alter table recipe drop constraint FK_p1p4idapmpd5ld429jvwm2uqt
alter table recipe drop constraint FK_a8b4h36wsgibqlygk8u6g17nb
drop table doctor if exists
drop table patient if exists
drop table priority if exists
drop table recipe if exists
create table doctor (id bigint generated by default as identity (start with 1), firstName varchar(255), middleName varchar(255), lastName varchar(255), specialization varchar(255), primary key (id))
create table patient (id bigint generated by default as identity (start with 1), firstName varchar(255), middleName varchar(255), lastName varchar(255), phone integer, primary key (id))
create table priority (id bigint generated by default as identity (start with 1), name varchar(255), primary key (id))
create table recipe (id bigint generated by default as identity (start with 1), description varchar(255) not null, duration bigint not null, date_create date not null, ID_PATIENT bigint not null, ID_PRIORITY bigint not null, ID_DOCTOR bigint not null, primary key (id))
alter table recipe add constraint FK_n4apafjamkqbin6g6j7i6ia6x foreign key (ID_PATIENT) references patient
alter table recipe add constraint FK_p1p4idapmpd5ld429jvwm2uqt foreign key (ID_PRIORITY) references priority
alter table recipe add constraint FK_a8b4h36wsgibqlygk8u6g17nb foreign key (ID_DOCTOR) references doctor
CREATE TABLE IF NOT EXISTS PATIENT(ID BIGINT, FIRSTNAME VARCHAR(50) NOT NULL, LASTNAME VARCHAR(50)  NOT NULL, MIDDLENAME VARCHAR(50) NOT NULL, PHONE INT UNIQUE NOT NULL, PRIMARY KEY (ID))
INSERT INTO PATIENT VALUES(1,'Lisov','Ulyanovich','Vseslav',333444)
COMMIT
INSERT INTO PATIENT VALUES(2,'Plyukhin','Andreevich','Alexey',123456)
COMMIT
INSERT INTO PATIENT VALUES(3,'Mikheev','Ermolaevich','Platon',666777)
COMMIT
INSERT INTO PATIENT VALUES(4,'Kimask','Fedorovna','Alla',989712)
COMMIT
INSERT INTO PATIENT VALUES(5,'Nutrihina','Iosifovna','Miroslava',556677)
COMMIT
CREATE TABLE IF NOT EXISTS DOCTOR(ID BIGINT, FIRSTNAME VARCHAR(50) NOT NULL, LASTNAME VARCHAR(50) NOT NULL, MIDDLENAME VARCHAR(50) NOT NULL, SPECIALIZATION VARCHAR(50) NOT NULL,PRIMARY KEY(ID))
INSERT INTO DOCTOR VALUES(1,'Solomina','Alekseevna','Vlada','Dantist')
COMMIT
INSERT INTO DOCTOR VALUES(2,'Lukyanov','Kondratievich','Vladislav','Therapist')
COMMIT
INSERT INTO DOCTOR VALUES(3,'Zhevlakov','Yakubovich','Gregory','Ophthalmologist')
COMMIT
INSERT INTO DOCTOR VALUES(4,'Golubev','Ivanovich','Boris','Dermatologist')
COMMIT
INSERT INTO DOCTOR VALUES(5,'Belarusians','Ostapovich','Timur','Allergist')
COMMIT
CREATE TABLE IF NOT EXISTS PRIORITY(ID BIGINT, "NAME" VARCHAR(30), PRIMARY KEY (ID))
INSERT INTO PRIORITY VALUES(1,'Normal')
COMMIT
INSERT INTO PRIORITY VALUES(2,'Cito')
COMMIT
INSERT INTO PRIORITY VALUES(3,'Statim')
COMMIT
CREATE TABLE IF NOT EXISTS RECIPE(ID BIGINT, DESCRIPTION VARCHAR(200) NOT NULL, ID_PATIENT BIGINT NOT NULL, ID_DOCTOR BIGINT NOT NULL, DATE_CREATE DATE DEFAULT CURRENT_DATE, DURATION BIGINT NOT NULL, ID_PRIORITY BIGINT NOT NULL, PRIMARY KEY(ID), CONSTRAINT FK_PATIENT FOREIGN KEY (ID_PATIENT) REFERENCES PATIENT(ID), CONSTRAINT FK_DOCTOR FOREIGN KEY (ID_DOCTOR) REFERENCES DOCTOR(ID), CONSTRAINT FK_PRIORITY FOREIGN KEY (ID_PRIORITY) REFERENCES PRIORITY(ID))
INSERT INTO RECIPE VALUES(1,'Take aspirin once a day',100,'2017-12-12',1,1,2)
COMMIT
INSERT INTO RECIPE VALUES(2,'Drink a teraflu twice a day',100,'2017-11-16',2,1,2)
COMMIT
INSERT INTO RECIPE VALUES(3,'Take loratadine once a day',100,'2017-10-23',5,2,5)
COMMIT
INSERT INTO RECIPE VALUES(4,'Take the centrin once a day',100,'2017-07-08',4,2,5)
COMMIT
INSERT INTO RECIPE VALUES(5,'Smear gums with a gel parodied twice a day',100,'2017-09-27',3,3,1)
COMMIT
INSERT INTO RECIPE VALUES(6,'To wear glasses with optical power of +1 diopter',100,'2017-10-13',5,2,3)
COMMIT
